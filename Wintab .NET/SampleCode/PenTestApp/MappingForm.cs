///////////////////////////////////////////////////////////////////////////////
//
//	PURPOSE
//		Mapping dialog for WintabDN
//
//	COPYRIGHT
//		Copyright (c) 2010-2020 Wacom Co., Ltd.
//
//		The text and information contained in this file may be freely used,
//		copied, or distributed without compensation or licensing restrictions.
//
///////////////////////////////////////////////////////////////////////////////
using System;
using System.Windows.Forms;
using WintabDN;

namespace PenTestApp
{
	public partial class MappingForm : Form
	{
		///////////////////////////////////////////////////////////////////////
	
		public CWintabContext LogContext { get; set; }

		public MappingForm()
		{
			InitializeComponent();
		}

		///////////////////////////////////////////////////////////////////////

		public void Init(CWintabContext logContext_I)
		{
			if (logContext_I == null)
			{
				throw new NullReferenceException("Oops - logContext is null!");
			}

			LogContext = logContext_I;
			InitMappingFields();
		}

		///////////////////////////////////////////////////////////////////////

		private void InitMappingFields()
		{
			if (LogContext == null)
			{
				throw new NullReferenceException("Oops - didn't init wintab context!");
			}

			inOrgXTextBox.Text = LogContext.InOrgX.ToString();
			inOrgYTextBox.Text = LogContext.InOrgY.ToString();
			inExtXTextBox.Text = LogContext.InExtX.ToString();
			inExtYTextBox.Text = LogContext.InExtY.ToString();

			outOrgXTextBox.Text = LogContext.OutOrgX.ToString();
			outOrgYTextBox.Text = LogContext.OutOrgY.ToString();
			outExtXTextBox.Text = LogContext.OutExtX.ToString();
			outExtYTextBox.Text = LogContext.OutExtY.ToString();

			sysOrgXTextBox.Text = LogContext.SysOrgX.ToString();
			sysOrgYTextBox.Text = LogContext.SysOrgY.ToString();
			sysExtXTextBox.Text = LogContext.SysExtX.ToString();
			sysExtYTextBox.Text = LogContext.SysExtY.ToString();
		}

		///////////////////////////////////////////////////////////////////////

		private void ApplyButton_Click(object sender, EventArgs e)
		{
			LogContext.InOrgX = Convert.ToInt32(inOrgXTextBox.Text);
			LogContext.InOrgY = Convert.ToInt32(inOrgYTextBox.Text);
			LogContext.InExtX = Convert.ToInt32(inExtXTextBox.Text);
			LogContext.InExtY = Convert.ToInt32(inExtYTextBox.Text);

			LogContext.OutOrgX = Convert.ToInt32(outOrgXTextBox.Text);
			LogContext.OutOrgY = Convert.ToInt32(outOrgYTextBox.Text);
			LogContext.OutExtX = Convert.ToInt32(outExtXTextBox.Text);
			LogContext.OutExtY = Convert.ToInt32(outExtYTextBox.Text);

			LogContext.SysOrgX = Convert.ToInt32(sysOrgXTextBox.Text);
			LogContext.SysOrgY = Convert.ToInt32(sysOrgYTextBox.Text);
			LogContext.SysExtX = Convert.ToInt32(sysExtXTextBox.Text);
			LogContext.SysExtY = Convert.ToInt32(sysExtYTextBox.Text);

			Close();
		}

		///////////////////////////////////////////////////////////////////////

		private void CancelButton_Click(object sender, EventArgs e)
		{
			Close();
		}
	}
}
